html,body{margin:0;padding:0;height:100%;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Arial,sans-serif;overflow:hidden}
nav{position:fixed;top:0;left:0;right:0;height:52px;background:#fff;border-bottom:1px solid #e8e8e8;display:flex;align-items:center;justify-content:space-between;padding:0 20px;z-index:2000;box-shadow:0 1px 6px rgba(0,0,0,.08)}
.nav-brand{font-weight:900;font-size:18px;letter-spacing:3px;color:#CC0000}
.nav-sub{font-size:12px;color:#888;margin-left:12px;padding-left:12px;border-left:1px solid #eee}
.nav-sub strong{color:#333}
.year-btns{display:flex;gap:4px;align-items:center}
.yl{font-size:10px;color:#aaa;margin-right:4px;text-transform:uppercase;letter-spacing:.5px}
.yb{padding:6px 16px;border-radius:20px;font-size:12px;font-weight:700;cursor:pointer;border:2px solid #e0e0e0;background:#fff;color:#888;transition:all .2s}
.yb:hover{border-color:#CC0000;color:#CC0000}
.yb.active{background:#CC0000;border-color:#CC0000;color:#fff;box-shadow:0 2px 8px rgba(204,0,0,.3)}
.nivel-btns{display:flex;gap:4px}
.nbtn{padding:5px 12px;border-radius:20px;font-size:11px;font-weight:700;cursor:pointer;border:2px solid transparent;background:#f5f5f5;color:#666;transition:all .15s}
.nbtn:hover{background:#eee}
.nbtn.a-all{background:#555;color:#fff}
.nbtn.a-high{background:#CC0000;color:#fff}
.nbtn.a-med{background:#E8920A;color:#fff}
.nbtn.a-low{background:#27A243;color:#fff}
.nbtn.a-cer{background:#666;color:#fff}
.nbtn.a-ov{background:#fff;color:#555;border:2px dashed #999}
#map{position:fixed;top:52px;left:380px;right:0;bottom:0;z-index:1}
.panel{position:fixed;top:52px;left:0;bottom:0;width:380px;background:#fff;z-index:500;display:flex;flex-direction:column;box-shadow:2px 0 16px rgba(0,0,0,.1)}
.search-area{padding:12px 12px 8px;border-bottom:1px solid #f0f0f0;flex-shrink:0}
.sw{display:flex;align-items:center;background:#f7f7f7;border-radius:6px;padding:0 10px;border:1.5px solid #ebebeb;transition:border .15s;margin-bottom:7px}
.sw:focus-within{border-color:#CC0000}
.sw svg{width:14px;height:14px;flex-shrink:0;opacity:.4}
.sw input{flex:1;border:none;background:none;padding:9px 6px;font-size:12px;outline:none;color:#222}
.sw input::placeholder{color:#ccc}
.fr{display:flex;gap:5px}
.fr select{flex:1;padding:6px 7px;border:1.5px solid #ebebeb;border-radius:5px;font-size:11px;color:#555;background:#fff;outline:none;cursor:pointer;min-width:0}
.fr select:focus{border-color:#CC0000}
.period-bar{font-size:10px;color:#aaa;padding:5px 12px;border-bottom:1px solid #f5f5f5;flex-shrink:0;background:#fafafa;display:flex;align-items:center;gap:8px}
.period-bar strong{color:#555}
.resumen{display:grid;grid-template-columns:1fr 1fr 1fr;gap:6px;padding:8px 10px;border-bottom:1px solid #f0f0f0;flex-shrink:0}
.rc{background:#fafafa;border-radius:7px;padding:8px 10px;text-align:center;cursor:pointer;transition:all .15s;border:2px solid transparent}
.rc:hover{background:#f3f3f3}
.rc.sel{background:#fff}
.rc-n{font-size:24px;font-weight:900;line-height:1}
.rc-l{font-size:9px;font-weight:700;text-transform:uppercase;letter-spacing:.7px;margin-top:2px;opacity:.8}
.rc-pct{font-size:10px;color:#aaa;margin-top:2px}
.rc-d{font-size:9px;font-weight:700;margin-top:2px}
.tabs{display:flex;border-bottom:1px solid #f0f0f0;flex-shrink:0}
.tab{flex:1;padding:9px 0;text-align:center;font-size:11px;font-weight:700;cursor:pointer;color:#bbb;border-bottom:2px solid transparent;transition:all .15s;letter-spacing:.2px}
.tab.active{color:#CC0000;border-bottom-color:#CC0000}
.lista{flex:1;overflow-y:auto}
.lista::-webkit-scrollbar{width:3px}
.lista::-webkit-scrollbar-thumb{background:#e8e8e8;border-radius:2px}
.li{padding:10px 12px;border-bottom:1px solid #f5f5f5;cursor:pointer;transition:background .1s;position:relative}
.li:hover,.li.active{background:#fdf8f8}
.li.active::before{content:'';position:absolute;left:0;top:0;bottom:0;width:3px;background:#CC0000;border-radius:0 2px 2px 0}
.li-top{display:flex;align-items:flex-start;justify-content:space-between;gap:6px;margin-bottom:2px}
.li-name{font-size:12px;font-weight:700;color:#111;line-height:1.3;flex:1}
.li-badge{font-size:9px;padding:2px 7px;border-radius:3px;color:#fff;font-weight:700;white-space:nowrap;flex-shrink:0}
.li-addr{font-size:10px;color:#aaa;margin-bottom:4px}
.li-bar-row{display:flex;align-items:center;gap:6px;margin-bottom:3px}
.li-bw{flex:1;height:4px;background:#eee;border-radius:2px;overflow:hidden}
.li-bf{height:100%;border-radius:2px}
.li-pct{font-size:11px;font-weight:800;width:32px;text-align:right;flex-shrink:0}
.li-delta{font-size:10px;font-weight:700;white-space:nowrap}
.du{color:#CC0000}.dd{color:#27A243}.dn{color:#aaa}
.li-meta{display:flex;gap:8px;font-size:9px;color:#ccc;flex-wrap:wrap;margin-top:1px}
.kpis-panel{flex:1;overflow-y:auto;padding:12px}
.kpis-panel::-webkit-scrollbar{width:3px}
.kpis-panel::-webkit-scrollbar-thumb{background:#e8e8e8}
.sb{margin-bottom:18px}
.sb h4{font-size:9px;text-transform:uppercase;letter-spacing:1px;color:#bbb;margin-bottom:8px;font-weight:700}
.sr{display:flex;align-items:center;gap:8px;margin-bottom:5px}
.sl{font-size:11px;color:#666;width:100px;flex-shrink:0}
.sbw{flex:1;height:5px;background:#f0f0f0;border-radius:3px;overflow:hidden}
.sbf{height:100%;border-radius:3px;transition:width .4s}
.sv{font-size:10px;font-weight:700;color:#333;width:38px;text-align:right}
.kg{display:grid;grid-template-columns:1fr 1fr;gap:6px;margin-top:6px}
.kc{background:#f8f8f8;border-radius:6px;padding:9px 11px;border-left:3px solid #ddd}
.kv{font-size:19px;font-weight:900;color:#222}
.kl{font-size:9px;color:#aaa;text-transform:uppercase;letter-spacing:.4px;margin-top:2px}
.kd{font-size:9px;font-weight:700;margin-top:3px}
.ti{display:flex;align-items:center;gap:8px;padding:7px 10px;border-bottom:1px solid #f5f5f5;cursor:pointer;transition:background .1s}
.ti:hover{background:#fdf8f8}
.tr{font-size:10px;color:#ccc;width:16px;text-align:center;flex-shrink:0}
.tn{flex:1;min-width:0}
.tnm{font-size:11px;font-weight:700;color:#222;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.tc{font-size:9px;color:#aaa}
.tt{text-align:right;flex-shrink:0}
.tp{font-size:13px;font-weight:900}
.td2{font-size:9px;font-weight:700;margin-top:1px}
.expbar{padding:8px 12px;border-top:1px solid #f0f0f0;display:flex;align-items:center;gap:6px;background:#fafafa;flex-shrink:0}
.btn{padding:5px 12px;border:1.5px solid #ddd;background:#fff;border-radius:4px;cursor:pointer;font-size:11px;font-weight:700;color:#555;transition:all .15s}
.btn:hover{border-color:#CC0000;color:#CC0000}
.ei{margin-left:auto;font-size:11px;color:#aaa}
.ei strong{color:#CC0000;font-size:13px}
.popup{min-width:270px;max-width:330px;font-size:12px}
.pt{font-size:9px;font-weight:700;text-transform:uppercase;letter-spacing:1px;margin-bottom:5px;opacity:.7}
.pn{font-size:15px;font-weight:900;color:#111;margin-bottom:2px;line-height:1.3}
.pl{font-size:11px;color:#999;margin-bottom:10px}
.pcb{display:flex;align-items:center;gap:10px;padding:9px 11px;border-radius:7px;margin-bottom:10px}
.pc-num{font-size:32px;font-weight:900;line-height:1}
.pc-r{flex:1}
.pniv{font-size:11px;font-weight:800;text-transform:uppercase;letter-spacing:.5px;margin-bottom:3px}
.pbw{height:5px;background:rgba(255,255,255,.4);border-radius:3px;overflow:hidden}
.pbf{height:100%;border-radius:3px;background:rgba(255,255,255,.9)}
.pdr{display:flex;align-items:center;gap:6px;margin-top:5px;font-size:11px}
.pdv{font-weight:800;font-size:13px}
.pdl{opacity:.7;font-size:10px}
.psc{margin-bottom:10px}
.psr{display:flex;align-items:center;gap:6px;margin-bottom:4px}
.psl{font-size:10px;color:#777;width:88px;flex-shrink:0}
.psbw{flex:1;height:4px;background:#eee;border-radius:2px;overflow:hidden}
.psbf{height:100%;border-radius:2px}
.psv{font-size:10px;font-weight:700;color:#333;width:22px;text-align:right}
.pkp{display:grid;grid-template-columns:1fr 1fr 1fr;gap:4px;margin-bottom:10px}
.pk{background:#f8f8f8;border-radius:4px;padding:5px 7px}
.pkv{font-size:12px;font-weight:800;color:#222}
.pkl{font-size:9px;color:#bbb;margin-top:1px}
.ppl{font-size:10px;color:#aaa;border-top:1px solid #f0f0f0;padding-top:7px;line-height:1.8}
.ppl strong{color:#777}
.leaflet-popup-content-wrapper{border-radius:10px;box-shadow:0 6px 28px rgba(0,0,0,.15)}
.leaflet-popup-content{margin:14px 16px}
.leaflet-tooltip{background:#111!important;color:#fff!important;border:none!important;border-radius:4px;font-size:11px;padding:4px 8px;box-shadow:0 2px 8px rgba(0,0,0,.3)}
.leaflet-tooltip::before{display:none}
.leaflet-control-attribution{font-size:9px!important;opacity:.4}
.legend{position:fixed;bottom:20px;right:20px;background:rgba(255,255,255,.96);border-radius:8px;padding:11px 15px;box-shadow:0 2px 14px rgba(0,0,0,.1);font-size:11px;z-index:600;border:1px solid #ebebeb}
.legend h5{font-size:9px;text-transform:uppercase;letter-spacing:1px;color:#ccc;margin-bottom:8px;font-weight:700}
.lr{display:flex;align-items:center;gap:8px;margin-bottom:5px}
.lr:last-child{margin-bottom:0}
.ld{width:11px;height:11px;border-radius:50%;border:1.5px solid rgba(0,0,0,.12)}
.ll{color:#555;font-weight:600}
.lc{color:#ccc;font-size:10px;margin-left:auto;padding-left:8px}
@media(max-width:900px){#map{left:0;top:52px;bottom:260px}.panel{top:auto;bottom:0;left:0;right:0;width:100%;height:260px}}
